---
const sampleCards = [
  {
    topic: "Python",
    question: "Co robi list comprehension?",
    answer:
      "Tworzy nową listę na podstawie iterowalnych danych i warunków, np. [x * 2 for x in range(5) if x % 2 == 0].",
  },
  {
    topic: "Python",
    question: "Czym różni się lista od krotki (tuple)?",
    answer: "Lista jest mutowalna, a krotka niemutowalna.",
  },
  {
    topic: "Python",
    question: "Co zwraca len() dla łańcucha?",
    answer: "Liczbę znaków w łańcuchu.",
  },
  {
    topic: "Python",
    question: "Jak działa operator in?",
    answer: "Sprawdza, czy element znajduje się w kolekcji (lista, string, set).",
  },
  {
    topic: "Python",
    question: "Co robi dict.get('key', default)?",
    answer: "Zwraca wartość klucza lub wartość domyślną, jeśli klucz nie istnieje.",
  },
  {
    topic: "Python",
    question: "Do czego służy enumerate()?",
    answer: "Zwraca pary (indeks, wartość) podczas iteracji po kolekcji.",
  },
  {
    topic: "Python",
    question: "Co oznacza *args w funkcji?",
    answer: "Pozwala przekazać dowolną liczbę argumentów pozycyjnych.",
  },
  {
    topic: "Python",
    question: "Co oznacza **kwargs w funkcji?",
    answer: "Pozwala przekazać dowolną liczbę argumentów nazwanych.",
  },
  {
    topic: "Python",
    question: "Jak działa list slicing?",
    answer: "Pozwala wycinać fragment listy, np. lista[1:4].",
  },
  {
    topic: "Python",
    question: "Co robi funkcja range(1, 5)?",
    answer: "Generuje liczby 1, 2, 3, 4.",
  },
]
---

<section class="space-y-4">
  <h2 class="text-lg font-semibold text-foreground">Zobacz jak działa fiszka</h2>
  <p class="mx-auto max-w-2xl text-sm text-muted-foreground text-center">
    Najedz myszką lub stuknij kartę, aby odwrócić fiszkę i zobaczyć odpowiedź.
  </p>
  <div class="mx-auto grid w-full max-w-6xl gap-4 sm:grid-cols-2 lg:grid-cols-3">
    {sampleCards.map((card, index) => (
      <div
        class="flip-card focus-visible:ring-2 focus-visible:ring-ring/50 focus-visible:ring-offset-2"
        role="button"
        tabindex="0"
        aria-pressed="false"
        aria-label={`Przykładowa fiszka ${index + 1} z ${card.topic}`}
        data-flip-card
      >
        <div class="flip-card-inner">
          <div class="flip-card-face flip-card-front">
            <p class="text-xs font-medium uppercase tracking-wide text-muted-foreground">{card.topic}</p>
            <h3 class="mt-2 text-sm font-semibold text-foreground">{card.question}</h3>
          </div>
          <div class="flip-card-face flip-card-back">
            <p class="text-xs font-medium uppercase tracking-wide text-muted-foreground">Odpowiedź</p>
            <p class="mt-2 text-xs text-foreground">{card.answer}</p>
          </div>
        </div>
      </div>
    ))}
  </div>
</section>

<script>
  /** @type {HTMLElement[]} */
  const cards = Array.from(document.querySelectorAll("[data-flip-card]"));

  for (const card of cards) {
    const toggleCard = () => {
      const isFlipped = card.classList.toggle("is-flipped");
      card.setAttribute("aria-pressed", String(isFlipped));
    };

    card.addEventListener("click", toggleCard);
    card.addEventListener("keydown", (event) => {
      if (!(event instanceof KeyboardEvent)) return;
      if (event.key === "Enter" || event.key === " ") {
        event.preventDefault();
        toggleCard();
      }
    });
  }
</script>

<style>
  .flip-card {
    position: relative;
    width: 100%;
    height: 200px;
    perspective: 1000px;
    overflow: hidden;
    border-radius: 12px;
    border: 1px solid rgba(0, 0, 0, 0.12);
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.08);
  }

  .flip-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.6s ease;
    transform-style: preserve-3d;
  }

  .flip-card.is-flipped .flip-card-inner {
    transform: rotateY(180deg);
  }

  @media (hover: hover) and (pointer: fine) {
    .flip-card:hover .flip-card-inner {
      transform: rotateY(180deg);
    }
  }

  .flip-card-face {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 18px;
    border-radius: 12px;
    /* border: 1px solid rgba(0, 0, 0, 0.12); */
    background: hsl(var(--card));
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
    backface-visibility: hidden;
  }

  :global(.dark) .flip-card {
    border-color: rgba(255, 255, 255, 0.16);
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.1);
  }

  :global(.dark) .flip-card-face {
    border-color: rgba(255, 255, 255, 0.16);
  }

  .flip-card-back {
    transform: rotateY(180deg);
  }
</style>
